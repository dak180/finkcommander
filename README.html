<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"
        "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html lang="en">
<head>
	<title>README</title>
	<link href="../fcstyle.css" rel="stylesheet" type="text/css">
</head>
<body>

<h2>Readme</h2>

<ul>
	<li><a href="#description">Overview</a></li>
	<li><a href="#installation">Installing FinkCommander</a></li>
	<li><a href="#timeout">Changing the Authorization Timeout</a></li>
	<li><a href="#license">License</a></li>
</ul>

<h3>
<a name="description">Overview</a>
</h3>

<p>
<a href="http://finkcommander.sourceforge.net"
target="top">FinkCommander</a> provides a GUI frontend to the <a
href="http://fink.sourceforge.net" target="top">Fink</a> package manager.  You will
need to <a href="http://fink.sourceforge.net/download/"
target="top">install Fink</a> itself in order for FinkCommander to be
of any use.
</p>

<p>
FinkCommander is designed to be intuitive.  A fairly extensive set of
help files is nevertheless included.  There is even a German translation in the
German localization.
</p>

<p>
If you encounter bugs, it would be very helpful to have them reported
at the SourceForge <a href="http://sourceforge.net/tracker/?group_id=48896&atid=454467"
target="top">Bug Tracker</a> for FinkCommander.
</p>

<p>
I will not be able to provide direct support for FinkCommander.
Software development is my hobby.  I have a pretty demanding &quot;day
job,&quot; so responding directly to every request for help is just not in
the cards.  I will, however, take your comments into account in
designing, and drafting documentation for, future versions of
FinkCommander.  Please send comments (other than bug reports) to my <a
href="mailto:sburrious@users.sourceforge.net">SourceForge email account</a>.
</p>

<h3>
<a name="installation">Installing FinkCommander</a>
</h3>

<p>Users who install FinkCommander from source or from the disk image should be aware 
of two things:</p>
<ol>
  <li>You should expect to see the following the first time
      you run a command after installing, moving or compiling FinkCommander:
      <ul><br />
	<li>FinkCommander will ask for your password through the standard
	    Macintosh authorization dialog.  It may ask twice.</li><br />
	<li>The output view in the lower part of the window will
	    display messages indicating that a &quot;tool&quot; had to
	    repair itself and that you should re-try the
	    command.</li><br />
	<li>FinkCommander will display an error dialog sheet.</li></br>
	</ul><br />
  </li>
  <li>You should change the owner of the FinkCommander application
      bundle and its contents to root and the group to admin.
      (The Package Installer would do this for you automatically.)  You
      can do this from Finder using Get Info (cmd-I), or open Terminal and
      enter the following at the command line:  <br /> <br />
      <kbd>sudo chown -R root:admin /Applications/FinkCommander.app/Contents/Resources</kbd>.
  </li>
</ol>
<p>
For those with sufficient interest and patience, an explanation
follows.  It assumes a basic understanding of the Unix file permission system.
</p>

<p>As of version 0.4.0, FinkCommander uses Apple's Security Framework
to authorize commands requiring root privileges.  In order to do this,
it must include an auxiliary program, or &quot;tool,&quot; that is
owned by root and that possesses a special file permission called
&quot;setuid.&quot;</p>

<p>The tool needs these permission settings in order to acquire the
authority to modify files and directories, such as those in your Fink
installation, that are owned by root.  Unix processes ordinarily
acquire the identity, and therefore the file permissions, of the user
who starts the process.  A program with setuid permission, on the
other hand, can assume the identity of the owner of the program's
file.  Thus, a program that is owned by root and has setuid permission
can modify files owned by root, provided the user supplies an
administrative password.</p>

<p>The program sudo is probably the most familiar example of a setuid tool.  
If at the command line you type <kbd>ls -l /usr/bin/sudo</kbd>, you will see the
following result:<br />
<pre>
    ---s--x--x    1 root     wheel       96384 Sep 18 21:23 /usr/bin/sudo
</pre>
The &quot;s&quot; appearing where one would ordinarily expect to
see an &quot;x&quot; shows that sudo has setuid permission.</p>

<p>
Because the package installer for FinkCommander obtains root privileges, it 
is able to install FinkCommander with these permissions already
established.  If you install from the disk image or compile FinkCommander 
in Project Builder, these permissions will not be set.
</p>

<p>
The tool, however, includes code to "repair" itself if it lacks
the necessary permissions and will do so the first time you try to run
a fink or apt-get command in FinkCommander.  The self-repair process 
results in the sequence of events described in item 1 above.
</p>

<p>
FinkCommander's tool is known as Launcher and resides in the Resources directory
of the FinkCommander.app bundle.  Changing the owner of Resources to root will
prevent someone with  
</p>

<h3><a name="timeout">Changing the Authorization Timeout</a></h3>

<p>
By default, FinkCommander works in much the same way as sudo.  If you run a command and
provide your password to authorize root privileges, that authorization has a timeout period
of five minutes.  You can enter additional commands without retyping your password for five
minutes.  After that, you need to reauthenticate.
</p>

<p>
You can customize the timeout for FinkCommander by editing the /private/etc/authorization file.  
To do so, open Terminal and type the following at the command line:
</p>

<p><kbd>sudo emacs /private/etc/authorization</kbd></p>

<p>You may of course substitute vi or pico or whichever inferior product you prefer to emacs.  :)  
You should not use the Property List Editor in /Developer/Applications to edit the file, 
because it will not preserve the comments.</p>

<p>To eliminate the timeout for FinkCommander, add the following:</p>
<pre>
&lt;!-- Your comment here --&gt;
    &lt;key&gt;com.sburrious.finkcommander&lt;/key&gt;
        &lt;dict&gt;
            &lt;key&gt;group&lt;/key&gt;
            &lt;string&gt;admin&lt;/string&gt;
            &lt;key&gt;shared&lt;/key&gt;
            &lt;true/&gt;
            &lt;key&gt;allow-root&lt;/key&gt;
            &lt;false/&gt;
        &lt;/dict&gt;
</pre>
<p>If you do this, entering your password at the beginning of a FinkCommander session will
authorize all subsequent commands.</p>

<p>To extend or shorten the timeout period, add the following key/value pair to the dict:</p>
<pre>
            &lt;key&gt;timeout&lt;/key&gt;
            &lt;integer&gt;N&lt;/integer&gt;
</pre>

<p>Where N is the timeout period in seconds.  To require a password for each command, set N to 0.</p>

<p>I hope to automize this process in a future release, possibly through FinkCommander's Preferences 
panel.</p>

<h3><a name="license">License</a></h3>

<p>
This program is free software; you may redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option) any later
version.
</p>

<p>
This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the GNU General Public License for more details.
</p>

<p>
A copy of the GPL is included in the file "LICENSE.html."  It can be viewed in the 
package installer and is included in the disk image for the binary versions of
FinkCommander.  In the source code version, the file is available in the top directory
as well as in the Documentation group in Project Builder.  It can also be viewed via the 
help system.
</p>

<p>
If you have downloaded the binary version of this software but would like the
source, it's available at the 
<a href="http://sourceforge.net/project/showfiles.php?group_id=48896"
target="top">FinkCommander SourceForge site</a>.
</p>


</body>
</html>
