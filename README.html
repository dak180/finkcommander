<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html lang="en">
<head>
	<title>README</title>
	<link href="../fcstyle.css" rel="stylesheet" type="text/css">
</head>
<body>

<h1>Readme</h1>

<h2>Contents</h2>

<ul>
	<li><a href="#description">Overview</a></li>
	<li><a href="#installation">Installing FinkCommander</a>
	<ul>
		<li><a href="#instructions">Instructions</a></li>
		<li><a href="#explanation">Explanation</a></li>
	</ul>
	</li>
	<li><a href="#timeout">Changing the Authorization Timeout</a></li>
	<li><a href="#license">License</a></li>
</ul>

<h2> <a name="description">Overview</a> </h2>

<p> <a href="http://finkcommander.sourceforge.net"
target="top">FinkCommander</a> provides a GUI frontend to the <a
href="http://fink.sourceforge.net" target="top">Fink</a> package manager.  You
will need to <a href="http://fink.sourceforge.net/download/"
target="top">install Fink</a> itself in order for FinkCommander to be of any
use. </p>

<p> FinkCommander is designed to be intuitive.  A fairly extensive set of help
files is nevertheless included.  There is even a German translation in the
German localization. </p>

<p>If you find a bug in FinkCommander, please consult the
<a href="http://finkcommander.sourceforge.net/pages/bugs.html">bug reporting 
guidelines</a> web page.  A link to the SourceForge Bug Tracker is provided
from that page.</p>

<p>I do not provide direct support for FinkCommander. Software
development is my hobby.  I have a pretty demanding &quot;day job,&quot; so
responding directly to every request for help is not possible.  I will,
however, take your comments into account in designing, and drafting
documentation for, future versions of FinkCommander.  Please send comments
(other than bug reports) to my <a
href="mailto:sburrious@users.sourceforge.net">SourceForge email account</a>.
</p>

<h2><a name="installation">Installing FinkCommander</a></h2>

<p>If you install FinkCommander from the disk image or source code, I
recommend that you follow the Instructions provided below before 
running the application for the first time.  If you install FinkCommander 
in a directory other than /Applications, then substitute the path to that 
directory for /Applications wherever it appears.</p>

<p>The package installer handles these installation steps automatically and is 
therefore the preferred method for installing FinkCommander as a binary.</p>

<h4><a name="instructions">Instructions</a></h4>

<ol>
	<li>Change the owner of the Resources directory in the FinkCommander application
	bundle by entering the following command in Terminal:
<pre>
sudo chown root:admin /Applications/FinkCommander.app/Contents/Resources</pre>
	</li>
	
	<li>Change the owner of the Launcher tool to root:
<pre>
sudo chown root:admin /Applications/FinkCommander.app/Contents/Resources/Launcher</pre>
	</li>
	
	<li>Give Launcher setuid permission:
<pre>
sudo chmod 4755 /Applications/FinkCommander.app/Contents/Resource/Launcher</pre>
	</li>
</ol>

<p>If you don't take steps 2 and 3, above, the Launcher tool will execute a
&quot;self-repair&quot; routine the first time you attempt to run a command. You
will need to enter your password twice and then re-try the command after the
self-repair process is complete.  Once the Launcher tool has repaired itself,
you should only need to enter your password once per <a href="#timeout">timeout
period</a>.</p>

<h4><a name="explanation">Explanation</a></h4>

<p>This explanation assumes a basic knowledge of Unix file permissions.</p>

<p>As of version 0.4.0, FinkCommander uses Apple's Security Framework to
authorize commands requiring root privileges.  An application needs root privileges
in order to modify files and directories, such as those in your Fink installation, 
that are owned by root.</p>

<p>To obtain root privileges, earlier versions of FinkCommander asked for
a user's password in a custom dialog sheet and then passed it along to the
sudo command.  The current version, consistent with Apple's recommendations,
calls on OS X's security server to obtain authorization and never touches the 
user's password.</p>

<p>In order to use the security server in the manner recommended by Apple,
FinkCommander must include an auxiliary program, or &quot;tool,&quot; that is
owned by root and possesses a special file permission called &quot;setuid.&quot;
A Unix processes ordinarily acquires the identity, and therefore the file
permissions, of the user who starts the process.  A process started by a program
with setuid permission, on the other hand, can assume the identity of the owner
of the program's file.  Thus, a program that is owned by root and has setuid
permission can modify files owned by root, provided the user supplies an
administrative password.</p>

<p>The sudo program provides a familiar example of a setuid tool. 
If at the command line you type <kbd>ls -l /usr/bin/sudo</kbd>, you will see 
the following result:</p>
<pre>---s--x--x    1 root     wheel       96384 Sep 18 21:23 /usr/bin/sudo 
</pre> 
<p>The &quot;s&quot; appearing where one would ordinarily expect to see an
&quot;x&quot; shows that sudo has setuid permission.  As a result, it is able to
run commands as root if the user provides an administrator's password.</p>

<p>Because the package installer for FinkCommander obtains root privileges, it
is able to install FinkCommander's tool, called &quot;Launcher&quot; 
with setuid root permission.  If you install from the disk image or compile 
FinkCommander in Project Builder, Launcher will not have setuid permission.</p>

<p>Launcher therefore includes functions to repair itself as described above.
Whenever Launcher is executed, it checks to see whether it has setuid root
permission. If not, it re-executes itself using a special authorization function
from the Security Framework and makes itself setuid root.</p>

<p>Launcher resides in the Resources directory.  Changing the owner of the
Resources directory to root, as recommended in Instructions, is recommended in
order to prevent someone without administrative privileges from replacing
Launcher. The replacement tool could use the root privileges obtained when you
enter your password to do damage to your system or invade your privacy.</p>

<h2><a name="timeout">Changing the Authorization Timeout</a></h2>

<p> By default, FinkCommander works in much the same way as sudo.  If you run a
command and provide your password to authenticate your entitlement to root
privileges, the authorization you acquire has a timeout period of five minutes. 
You can enter additional commands requiring root without retyping your password
for five minutes.  After that, you need to re-authenticate.</p>

<p> You can customize the timeout for FinkCommander by editing the
/private/etc/authorization file.  To do so, open Terminal and type the following
at the command line: </p>

<p><kbd>sudo [editor] /private/etc/authorization</kbd></p>

<p>where [editor] is the name of your favorite command-line editor. 
You should not use the Property List Editor in /Developer/Applications to edit the file, because it will fail to preserve the comments.</p>

<p>To eliminate the timeout for FinkCommander, add the following
&quot;rule&quot; to the authorization file:</p>
<pre>
&lt;!-- Your comment here --&gt;
    &lt;key&gt;com.sburrious.finkcommander&lt;/key&gt;
        &lt;dict&gt;
            &lt;key&gt;group&lt;/key&gt;
            &lt;string&gt;admin&lt;/string&gt;
            &lt;key&gt;shared&lt;/key&gt;
            &lt;true/&gt;
        &lt;/dict&gt;
</pre>

<p>You can place these lines before any of the comment lines 
(the lines starting with &quot;&lt;!--&quot;) in the file.  A logical location 
would be right before the final comment introducing the default 
authorization rule. Once you have made these changes, entering your password 
at the beginning of a FinkCommander session will authorize all subsequent 
commands during the session.</p>

<p>To extend or shorten the timeout period, include the following key/value pair
in the lines shown above before the &lt;&nbsp;/dict&gt; tag.</p> 
<pre>
	&lt;key&gt;timeout&lt;/key&gt;
	&lt;integer&gt;N&lt;/integer&gt; 
</pre>

<p>Where N is the timeout period in seconds.  To require a password for each
command, set N to 0.</p>

<p>I hope to automate this process in a future release, possibly through
FinkCommander's Preferences panel.</p>

<h2><a name="license">License</a></h2>

<p> This program is free software; you may redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option) any
later version. </p>

<p> This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
</p>

<p> A copy of the GPL is included in the file "LICENSE.html."  It can be viewed
in the package installer and is included in the disk image for the binary
versions of FinkCommander.  In the source code version, the file is available in
the top directory as well as in the Documentation group in Project Builder.  It
can also be viewed via the help system. </p>

<p> If you have downloaded the binary version of this software but would like
the source, it is available at the <a
href="http://sourceforge.net/project/showfiles.php?group_id=48896"
target="top">FinkCommander SourceForge site</a>. </p>


</body>
</html>
